(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[660],{1944:(e,t,r)=>{"use strict";r.r(t),r.d(t,{PlatformLoginPage:()=>f,default:()=>_});var a=r(6514),s=r(6225),n=r(5834),i=r(8384),l=r(4933),o=r.n(l),u=r(6456),c=r.n(u),d=r(6115),m=r.n(d);let h=(0,n.forwardRef)((e,t)=>{let{children:r,variant:s="primary",size:n="md",isLoading:i,className:l,disabled:o,...u}=e;return(0,a.jsx)("button",{ref:t,className:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.flat().filter(e=>null!=e&&!1!==e).map(e=>"object"==typeof e?Object.entries(e).filter(e=>{let[t,r]=e;return!!r}).map(e=>{let[t]=e;return t}):e).flat().join(" ")}(m().button,m()[s],m()[n],i&&m().loading,l),disabled:i||o,...u,children:i?(0,a.jsx)("span",{className:m().loader,children:"Loading..."}):r})});h.displayName="Button";let p=e=>{let{platform:t}=e,[r,l]=(0,n.useState)(""),[u,d]=(0,n.useState)(""),[m,p]=(0,n.useState)(""),[f,_]=(0,n.useState)(!1),[N,g]=(0,n.useState)(!1),v=(0,s.useRouter)();(0,n.useEffect)(()=>{g(!0)},[]);let x=async e=>{e.preventDefault(),p(""),_(!0);try{var a;let{data:e,error:s}=await i.N.auth.signInWithPassword({email:r,password:u});if(s)throw s;let{data:n,error:l}=await i.N.from("users").select("role, approved").eq("id",null==(a=e.user)?void 0:a.id).single();if(l||!n)throw Error("Error retrieving user information");if(n.role!==t)throw Error("This account is registered as a ".concat(n.role,", not a ").concat(t));if(!n.approved)throw Error("Your account is pending approval");N&&v.push("/platforms/".concat(t))}catch(e){p(e instanceof Error?e.message:"An error occurred")}finally{_(!1)}};return N?(0,a.jsxs)("form",{onSubmit:x,className:o().authForm,children:[m&&(0,a.jsx)("div",{className:o().error,children:m}),(0,a.jsxs)("div",{className:o().formGroup,children:[(0,a.jsx)("label",{htmlFor:"email",className:o().label,children:"Email"}),(0,a.jsx)("input",{id:"email",type:"email",value:r,onChange:e=>l(e.target.value),className:o().input,required:!0})]}),(0,a.jsxs)("div",{className:o().formGroup,children:[(0,a.jsx)("label",{htmlFor:"password",className:o().label,children:"Password"}),(0,a.jsx)("input",{id:"password",type:"password",value:u,onChange:e=>d(e.target.value),className:o().input,required:!0})]}),(0,a.jsx)(h,{type:"submit",disabled:f,className:o().button,children:f?"Logging in...":"Login"}),(0,a.jsx)(c(),{href:"/Auth/register/".concat(t),className:o().backLink,children:"Don't have an account? Register here"})]}):null},f=()=>{let e=(0,s.useRouter)(),[t,r]=(0,n.useState)(!0),{platform:i}=e.query;return((0,n.useEffect)(()=>{e.isReady&&"student"!==i&&"teacher"!==i&&(r(!1),e.push("/Auth/login"))},[e.isReady,i,e]),e.isReady)?t?(0,a.jsx)("div",{className:o().container,children:(0,a.jsxs)("div",{className:o().formContainer,children:[(0,a.jsx)("h1",{className:o().title,children:"student"===i?"Student Login":"Teacher Login"}),(0,a.jsx)(p,{platform:i})]})}):null:(0,a.jsx)("div",{className:o().container,children:(0,a.jsx)("div",{className:o().formContainer,children:(0,a.jsx)("h1",{className:o().title,children:"Loading..."})})})},_=f},2990:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/Auth/login/[platform]",function(){return r(1944)}])},4933:()=>{},6115:e=>{e.exports={button:"Button_button__f_l0m",primary:"Button_primary__gNjMo",secondary:"Button_secondary__6ARy2",outline:"Button_outline__Nk0b6",sm:"Button_sm__CDbQJ",md:"Button_md__fwg2m",lg:"Button_lg__2Fw1x",loading:"Button_loading__xz7Vs"}},6225:(e,t,r)=>{e.exports=r(4379)},8384:(e,t,r)=>{"use strict";r.d(t,{N:()=>i});var a=r(7521);let s="https://EFLExplorers-ddvpckdfcfqwtjxdgvhb.supabase.co",n="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRkdnBja2RmY2Zxd3RqeGRndmhiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTE4MzQ2OTYsImV4cCI6MjA2NzQxMDY5Nn0.PPwtzGuizPNcROeoi5UOpwtRxGHV4vABIQ_7bvNuIFc";if(!s||!n)throw Error("Missing Supabase environment variables");let i=(0,a.UU)(s,n)}},e=>{var t=t=>e(e.s=t);e.O(0,[521,636,593,792],()=>t(2990)),_N_E=e.O()}]);