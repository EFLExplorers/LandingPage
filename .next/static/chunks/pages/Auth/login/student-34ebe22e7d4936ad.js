(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[600],{909:(e,r,a)=>{"use strict";a.d(r,{Q:()=>w,g:()=>N});var s=a(6514),t=a(5834),i=a(6456),n=a.n(i),l=a(8384),o=a(4933),d=a.n(o);let u=e=>{let{id:r,name:a,type:t,label:i,value:n,onChange:l,required:o=!1,disabled:u=!1,error:c}=e;return(0,s.jsxs)("div",{className:d().formGroup,children:[(0,s.jsx)("label",{htmlFor:r,className:d().label,children:i}),(0,s.jsx)("input",{id:r,name:a,type:t,value:n,onChange:l,className:"".concat(d().input," ").concat(c?d().inputError:""),required:o,disabled:u}),c&&(0,s.jsx)("span",{className:d().errorText,children:c})]})};var c=a(9936),m=a.n(c),h=a(2688),p=a.n(h),_=a(2922);let w=e=>{let{platform:r}=e,[a,i]=(0,t.useState)({email:"",password:""}),[o,d]=(0,t.useState)(""),[c,h]=(0,t.useState)(!1),w=e=>{i({...a,[e.target.name]:e.target.value})},b=async e=>{e.preventDefault(),d(""),h(!0);try{var s;let{data:e,error:t}=await l.N.auth.signInWithPassword({email:a.email,password:a.password});if(t)throw t;let{data:i,error:n}=await l.N.from("users").select("role, approved").eq("id",null==(s=e.user)?void 0:s.id).single();if(n||!i)throw Error("Error retrieving user information");if(i.role!==r)throw Error("This account is registered as a ".concat(i.role,", not a ").concat(r));if("teacher"===r&&!i.approved)throw Error("Your teacher account is pending approval");let o="teacher"===r?_.env.NEXT_PUBLIC_TEACHER_URL:_.env.NEXT_PUBLIC_STUDENT_URL;window.location.href="".concat(o,"/dashboard")}catch(e){d(e instanceof Error?e.message:"An unexpected error occurred")}finally{h(!1)}};return(0,s.jsxs)("form",{onSubmit:b,className:m().form,children:[o&&(0,s.jsx)("div",{className:p().error,children:o}),(0,s.jsx)(u,{id:"email",name:"email",type:"email",label:"Email",value:a.email,onChange:w,required:!0,disabled:c}),(0,s.jsx)(u,{id:"password",name:"password",type:"password",label:"Password",value:a.password,onChange:w,required:!0,disabled:c}),(0,s.jsx)("button",{type:"submit",className:p().button,disabled:c,children:c?"Logging in...":"Login"}),(0,s.jsx)("div",{className:m().links,children:(0,s.jsx)(n(),{href:"/auth/register/".concat(r),className:p().link,children:"Don't have an account? Register here"})})]})},b=e=>{var r,a,s;return(null==(r=e.firstName)?void 0:r.trim())?(null==(a=e.lastName)?void 0:a.trim())?(null==(s=e.email)?void 0:s.trim())?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.email)?e.password?e.password.length<6?"Password must be at least 6 characters long":e.password!==e.confirmPassword?"Passwords do not match":null:"Password is required":"Please enter a valid email address":"Email is required":"Last name is required":"First name is required"},N=e=>{let{platform:r}=e,[a,i]=(0,t.useState)({firstName:"",lastName:"",email:"",password:"",confirmPassword:""}),[l,o]=(0,t.useState)(""),[c,m]=(0,t.useState)(!1),h=e=>{i({...a,[e.target.name]:e.target.value})},p=async e=>{e.preventDefault(),o(""),m(!0);let r=b(a);if(r){o(r),m(!1);return}m(!1)};return(0,s.jsxs)("form",{onSubmit:p,className:d().authForm,children:[l&&(0,s.jsx)("div",{className:d().error,children:l}),(0,s.jsx)(u,{id:"firstName",name:"firstName",type:"text",label:"First Name",value:a.firstName||"",onChange:h,required:!0,disabled:c}),(0,s.jsx)(u,{id:"lastName",name:"lastName",type:"text",label:"Last Name",value:a.lastName||"",onChange:h,required:!0,disabled:c}),(0,s.jsx)(u,{id:"email",name:"email",type:"email",label:"Email",value:a.email,onChange:h,required:!0,disabled:c}),(0,s.jsx)(u,{id:"password",name:"password",type:"password",label:"Password",value:a.password,onChange:h,required:!0,disabled:c}),(0,s.jsx)(u,{id:"confirmPassword",name:"confirmPassword",type:"password",label:"Confirm Password",value:a.confirmPassword||"",onChange:h,required:!0,disabled:c}),(0,s.jsx)("button",{type:"submit",className:d().button,disabled:c,children:c?"Creating Account...":"Create Account"}),(0,s.jsx)("div",{className:d().links,children:(0,s.jsx)(n(),{href:"/auth/login",children:"Already have an account? Login here"})})]})}},2688:e=>{e.exports={container:"shared_container__8WFVw",formGroup:"shared_formGroup__0OmuQ",label:"shared_label__5wVYQ",input:"shared_input__02DtE",error:"shared_error__135xg"}},2842:e=>{e.exports={container:"AuthContainer_container__rNf7A",card:"AuthContainer_card__9uTUA",title:"AuthContainer_title__6DeZ4",subtitle:"AuthContainer_subtitle__PViuP"}},4933:()=>{},6577:(e,r,a)=>{"use strict";a.d(r,{_:()=>n});var s=a(6514),t=a(2842),i=a.n(t);let n=e=>{let{children:r,title:a,subtitle:t}=e;return(0,s.jsx)("div",{className:i().container,children:(0,s.jsxs)("div",{className:i().formContainer,children:[(0,s.jsx)("h1",{className:i().title,children:a}),t&&(0,s.jsx)("p",{className:i().subtitle,children:t}),r]})})}},7105:(e,r,a)=>{"use strict";a.r(r),a.d(r,{StudentLoginPage:()=>n,default:()=>l});var s=a(6514),t=a(6577),i=a(909);let n=()=>(0,s.jsx)(t._,{title:"Student Login",subtitle:"Welcome back to ESL Explorers",children:(0,s.jsx)(i.Q,{platform:"student"})}),l=n},8113:(e,r,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/Auth/login/student",function(){return a(7105)}])},8384:(e,r,a)=>{"use strict";a.d(r,{N:()=>n});var s=a(7521);let t="https://EFLExplorers-ddvpckdfcfqwtjxdgvhb.supabase.co",i="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRkdnBja2RmY2Zxd3RqeGRndmhiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTE4MzQ2OTYsImV4cCI6MjA2NzQxMDY5Nn0.PPwtzGuizPNcROeoi5UOpwtRxGHV4vABIQ_7bvNuIFc";if(!t||!i)throw Error("Missing Supabase environment variables");let n=(0,s.UU)(t,i)},9936:e=>{e.exports={form:"LoginForm_form__J_wx5",input:"LoginForm_input__VsCSY",button:"LoginForm_button__Aegz_",error:"LoginForm_error__tAJ2G"}}},e=>{var r=r=>e(e.s=r);e.O(0,[521,636,593,792],()=>r(8113)),_N_E=e.O()}]);